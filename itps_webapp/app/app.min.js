var BASE_URL=window.location.href,BAGRAS_GEOJSON=BASE_URL+"data/RescaledRefinedBagras_CaragaRegion.json",MANGIUM_GEOJSON=BASE_URL+"data/RescaledRefinedMangium_CaragaRegion.json",GMELINA_GEOJSON=BASE_URL+"data/RescaledRefinedGmelina_CaragaRegion.json",FALCATA_GEOJSON=BASE_URL+"data/RescaledRefinedFalcata_CaragaRegion.json",NGP_FALCATA_DENR=BASE_URL+"data/NGP_DENRCaraga_Falcata.json",NGP_GMELINA_DENR=BASE_URL+"data/NGP_DENRCaraga_Gmelina.json",NGP_MANGIUM_DENR=BASE_URL+"data/NGP_DENRCaraga_Mangium.json",
NGP_BAGRAS_DENR=BASE_URL+"data/NGP_DENRCaraga_Bagras.json",NGP_PENRO_ADN_BAGRAS=BASE_URL+"data/NGP_PENROAdN_Bagras.json",NGP_PENRO_ADN_FALCATA=BASE_URL+"data/NGP_PENROAdN_Falcata.json",NGP_PENRO_ADN_MANGIUM=BASE_URL+"data/NGP_PENROAdN_Mangium.json",NGP_PENRO_ADS_BAGRAS=BASE_URL+"data/NGP_PENROAdS_Bagras.json",NGP_PENRO_ADS_FALCATA=BASE_URL+"data/NGP_PENROAdS_Falcata.json",NGP_PENRO_ADS_MANGIUM=BASE_URL+"data/NGP_PENROAdS_Mangium.json",NGP_CENRO_TALACOGON_FALCATA=BASE_URL+"data/NGP_CENROTalacogon_Falcata.json",
NGP_CENRO_TUBAY_FALCATA=BASE_URL+"data/NGP_CENROTubay_Falcata.json",NGP_CENRO_TUBAY_MANGIUM=BASE_URL+"data/NGP_CENROTubay_Mangium.json",ITP_AREA_BRGY=BASE_URL+"data/ITP_Area_Barangay.json",ITP_AREA_MUN=BASE_URL+"data/ITP_Area_Municipalit.json",ITP_AREA_PRO=BASE_URL+"data/ITP_Area_Province.json",TPO_NASIPIT_2011=BASE_URL+"data/TPO_Nasipit_2011.json",TPO_NASIPIT_2012=BASE_URL+"data/TPO_Nasipit_2012.json",TPO_NASIPIT_2013=BASE_URL+"data/PTPOC2013_CENRONasipit.json",TPO_NASIPIT_2015=BASE_URL+"data/PTPOC2015_CENRONasipit.json",
TPO_NASIPIT_2016=BASE_URL+"data/PTPOC2016_CENRONasipit.json",TPO_NASIPIT_2017=BASE_URL+"data/PTPOC2017_CENRONasipit.json",TPO_NASIPIT_2019=BASE_URL+"data/PTPOC2019_CENRONasipit.json",TPO_NASIPIT_2020=BASE_URL+"data/PTPOC2020_CENRONasipit.json",TPO_TALACOGON_FALCATA=BASE_URL+"data/CTPO_CENROTalacogon_Falcata.json",TPO_TALACOGON_GMELINA=BASE_URL+"data/CTPO_CENROTalacogon_Gmelina.json",TPO_TALACOGON_MANGIUM=BASE_URL+"data/CTPO_CENROTalacogon_Mangium.json",TPO_TALACOGON_2012_2013=BASE_URL+"data/CTPO20122013_CENROTalacogon.json",
TPO_TALACOGON_2016_2017=BASE_URL+"data/CTPO20162017_CENROTalacogon.json",TPO_TALACOGON_2017_2018=BASE_URL+"data/CTPO20172018_CENROTalacogon.json",TPO_TALACOGON_2018_2019=BASE_URL+"data/CTPO20182019_CENROTalacogon.json",TPO_LORETO_FALCATA=BASE_URL+"data/CTPO_CENROLoreto_Falcata.json",TPO_LORETO_GMELINA=BASE_URL+"data/CTPO_CENROLoreto_Gmelina.json",TPO_TUBAY=BASE_URL+"data/CTPO_CENROTubay.json",ADS_GROUND_TRUTH=BASE_URL+"data/ADS_Ground_Truth.json",FURNITURE=BASE_URL+"data/FurnitureStores_Caragaregion.json",
WPPs=BASE_URL+"data/WPPs_Caragaregion.json",CARAGA_PLACES=BASE_URL+"js/caraga.json",map=L.map("map");map.setView([9.1204,125.59],8);
var groupAreaStats=new L.layerGroup,groupTrees=new L.layerGroup,groupTreesNGP=new L.layerGroup,groupTreesNGPOther=new L.layerGroup,groupOtherLayer=new L.layerGroup,groupSurvey=new L.layerGroup,groupTPO=new L.layerGroup,FILTERED_LAYER=null,highlight,LAYERS_REPO=[],ARR_LAYERS=[],ADDED_LAYERS=[],LAYER_TYPE=null,LAYER_NAME=null,LAYER_GEOJSON=L.geoJson(null),LOADED_LAYERS=[],LAYER_DATA=null,LAYER_DATA_GEOJSON=null,BRGY_AREA_STATS=null,MUN_AREA_STATS=null,PROV_AREA_STATS=null,LOADING_BAR=new ldBar("#myItem1");
function toogleTrees(c,d,l){console.log(groupTrees.getLayers());console.log(ADDED_LAYERS.includes(d));LAYER_NAME=d;if(0!=groupTrees.getLayers().length&&0!=ADDED_LAYERS.includes(d)||1!=l)if(ADDED_LAYERS.includes(d)&&1==l){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(d)&&(l=groupTrees.getLayer(ARR_LAYERS[c][d]),map.addLayer(l));$.each(LAYERS_REPO,function(b){LAYERS_REPO[b].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[b][LAYER_NAME].show=!0,console.log("set show to true--\x3e",LAYER_NAME))})}else if(0==
l){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(d)&&(l=groupTrees.getLayer(ARR_LAYERS[c][d]),map.removeLayer(l));$.each(LAYERS_REPO,function(b){LAYERS_REPO[b].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[b][LAYER_NAME].show=!1)})}else console.log("ehhh no condition met");else{var g=0;$("#loadMe").modal("show");$.ajax({xhr:function(){var b=new window.XMLHttpRequest;b.addEventListener("progress",function(n){n.lengthComputable&&(g=100*parseFloat(n.loaded/n.total),(new ldBar("#myItem1")).set(g))},
!1);return b},type:"GET",url:c,success:function(b){console.log("ready");if(100==g){setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500);b=omnivore.topojson.parse(b).toGeoJSON();var n=L.vectorGrid.slicer(b,{rendererFactory:L.canvas.tile,vectorTileLayerStyles:{sliced:{fillColor:"Falcata"==d?"#006d2c":"Gmelina"==d?"#a50f15":"Mangium"==d?"#54278f":"#08519c",color:"black",weight:.1,fill:!0,stroke:!0,fillOpacity:.8}},maxZoom:22,indexMaxZoom:5,interactive:!0}).addTo(map);console.log("added to map");
groupTrees.addLayer(n);n=groupTrees.getLayers()[groupTrees.getLayers().length-1]._leaflet_id;var k={};k[d]=n;ARR_LAYERS.push(k);ADDED_LAYERS.push(d);n={};b.features[0].properties.show=!0;n[d]=b;n[d].show=!0;LAYERS_REPO.push(n);$.each(LAYERS_REPO,function(r){LAYERS_REPO[r].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[r][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[r][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))})}}})}}
function toogleTreesNGPOthers(c,d,l,g){console.log(groupTreesNGPOther.getLayers());console.log(ADDED_LAYERS.includes(d));LAYER_NAME=l;if(0!=groupTreesNGPOther.getLayers().length&&0!=ADDED_LAYERS.includes(l)||1!=g)if(ADDED_LAYERS.includes(l)&&1==g){for(var b=0;b<ARR_LAYERS.length;b++)console.log(ARR_LAYERS[b].hasOwnProperty(l)),ARR_LAYERS[b].hasOwnProperty(l)&&(console.log(ARR_LAYERS[b][l]),c=groupTreesNGPOther.getLayer(ARR_LAYERS[b][l]),map.addLayer(c));$.each(LAYERS_REPO,function(n){LAYERS_REPO[n].hasOwnProperty(LAYER_NAME)&&
(LAYERS_REPO[n][LAYER_NAME].show=!0,console.log("set show to true--\x3e",LAYER_NAME))})}else if(0==g){for(b=0;b<ARR_LAYERS.length;b++)ARR_LAYERS[b].hasOwnProperty(l)&&(console.log(ARR_LAYERS[b][l]),c=groupTreesNGPOther.getLayer(ARR_LAYERS[b][l]),map.removeLayer(c));$.each(LAYERS_REPO,function(n){LAYERS_REPO[n].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[n][LAYER_NAME].show=!1,console.log("set show to false--\x3e",LAYER_NAME))})}else console.log("ehhh no condition met");else $("#loadMe").modal("show"),
$.ajax({xhr:function(){var n=new window.XMLHttpRequest;n.addEventListener("progress",function(k){k.lengthComputable&&(k=100*parseFloat(k.loaded/k.total),(new ldBar("#myItem1")).set(k),100==k&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return n},type:"GET",url:c,success:function(n){var k=L.geoJSON(n,{onEachFeature:function(h,v){var w=h.properties,e='<table border="1">';for(b in w)e+="<tr><td>"+b+"</td>",e+="<td>"+w[b]+"</td></tr>";v.bindPopup(e+"</table>")},
style:function(h){h=h.properties.Species.split(",");return{fillColor:1==h.includes("Falcata")||h.includes(" Falcata")?"#006d2c":h.includes("Gmelina")||h.includes(" Gmelina")?"#a50f15":h.includes("Mangium")||h.includes(" Mangium")?"#54278f":h.includes("Bagras")||h.includes(" Bagras")?"#08519c":"#fff",color:"black",weight:.5,fill:!0,stroke:!0,fillOpacity:.8}}}).addTo(map);map.fitBounds(k.getBounds());console.log("added to map");groupTreesNGPOther.addLayer(k);console.log(ARR_LAYERS);k=groupTreesNGPOther.getLayers()[groupTreesNGPOther.getLayers().length-
1]._leaflet_id;var r={};r[l]=k;ARR_LAYERS.push(r);ADDED_LAYERS.push(l);k={};n.features[0].properties.show=!0;k[l]=n;k[l].show=!0;LAYERS_REPO.push(k);$.each(LAYERS_REPO,function(h){LAYERS_REPO[h].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[h][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[h][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))});setTimeout(function(){$("#loadMe").modal("hide")},500)}})}
function toogleTreesNGP(c,d,l,g){LAYER_NAME=l;if(0!=groupTreesNGP.getLayers().length&&0!=ADDED_LAYERS.includes(l)||1!=g)if(ADDED_LAYERS.includes(l)&&1==g){for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(l)),ARR_LAYERS[c].hasOwnProperty(l)&&(console.log(ARR_LAYERS[c][l]),g=groupTreesNGP.getLayer(ARR_LAYERS[c][l]),map.addLayer(g));$.each(LAYERS_REPO,function(b){LAYERS_REPO[b].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[b][LAYER_NAME].show=!0,console.log("set show to true--\x3e",
LAYER_NAME))})}else if(0==g){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(l)&&(console.log(ARR_LAYERS[c][l]),g=groupTreesNGP.getLayer(ARR_LAYERS[c][l]),map.removeLayer(g));$.each(LAYERS_REPO,function(b){LAYERS_REPO[b].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[b][LAYER_NAME].show=!1,console.log("set show to false--\x3e",LAYER_NAME))})}else console.log("ehhh no condition met");else $("#loadMe").modal("show"),$.ajax({xhr:function(){var b=new window.XMLHttpRequest;b.addEventListener("progress",
function(n){n.lengthComputable&&(n=100*parseFloat(n.loaded/n.total),console.log(n),LOADING_BAR.set(n),100==n&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return b},type:"GET",url:c,success:function(b){console.log("ready");b=omnivore.topojson.parse(b).toGeoJSON();var n=L.vectorGrid.slicer(b,{rendererFactory:L.canvas.tile,vectorTileLayerStyles:{sliced:{fillColor:"Falcata"==d?"#006d2c":"Gmelina"==d?"#a50f15":"Mangium"==d?"#54278f":"#08519c",color:"black",
weight:.1,fill:!0,stroke:!0,fillOpacity:.8}},maxZoom:22,indexMaxZoom:5,interactive:!0}).addTo(map);console.log("added to map");groupTreesNGP.addLayer(n);console.log(ARR_LAYERS);n=groupTreesNGP.getLayers()[groupTreesNGP.getLayers().length-1]._leaflet_id;var k={};k[l]=n;ARR_LAYERS.push(k);ADDED_LAYERS.push(l);n={};b.features[0].properties.show=!0;n[l]=b;n[l].show=!0;LAYERS_REPO.push(n);$.each(LAYERS_REPO,function(r){LAYERS_REPO[r].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[r][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[r][LAYER_NAME]),
console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))})}})}
function toogleAreaStats(c,d,l,g,b){LAYER_NAME=d;if(0==ADDED_LAYERS.includes(d)&&1==b)$("#loadMe").modal("show"),$.ajax({xhr:function(){var n=new window.XMLHttpRequest;n.addEventListener("progress",function(k){k.lengthComputable&&(k=100*parseFloat(k.loaded/k.total),(new ldBar("#myItem1")).set(k),100==k&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return n},type:"GET",url:c,success:function(n){console.log("ready");n=omnivore.topojson.parse(n).toGeoJSON();
console.log("ready");console.log("coverage",l);"Barangay"==l&&null==BRGY_AREA_STATS&&(BRGY_AREA_STATS=n);"City/Municipality"==l&&null==MUN_AREA_STATS&&(MUN_AREA_STATS=n);"Province"==l&&null==PROV_AREA_STATS&&(PROV_AREA_STATS=n);var k=L.vectorGrid.slicer(n,{rendererFactory:L.canvas.tile,vectorTileLayerStyles:{sliced:function(h){h="Falcata"==g?parseFloat(h.Falc_Ar_h):"Gmelina"==g?parseFloat(h.Gmel_Ar_h):"Mangium"==g?parseFloat(h.Mang_Ar_h):parseFloat(h.Bagr_Ar_h);return 0==h?{fillColor:"white",color:"black",
weight:1,fill:!0,stroke:!0,fillOpacity:.8}:10>=h&&0<h?{fillColor:"Falcata"==g?"#edf8e9":"Gmelina"==g?"#fee5d9":"Mangium"==g?"#f2f0f7":"#eff3ff",color:"black",weight:.5,fill:!0,stroke:!0,fillOpacity:.8}:10<h&&20>=h?{fillColor:"Falcata"==g?"#bae4b3":"Gmelina"==g?"#fcae91":"Mangium"==g?"#cbc9e2":"#bdd7e7",color:"black",weight:.5,fill:!0,stroke:!0,fillOpacity:.8}:20<h&&30>=h?{fillColor:"Falcata"==g?"#74c476":"Gmelina"==g?"#fb6a4a":"Mangium"==g?"#9e9ac8":"#6baed6",color:"black",weight:.5,fill:!0,stroke:!0,
fillOpacity:.8}:30<h&&40>=h?{fillColor:"Falcata"==g?"#31a354":"Gmelina"==g?"#de2d26":"Mangium"==g?"#756bb1":"#3182bd",color:"black",weight:.5,fill:!0,stroke:!0,fillOpacity:.8}:{fillColor:"Falcata"==g?"#006d2c":"Gmelina"==g?"#a50f15":"Mangium"==g?"#54278f":"#08519c",color:"black",weight:.5,fill:!0,stroke:!0,fillOpacity:.8}}},maxZoom:22,indexMaxZoom:5,interactive:!0}).addTo(map);console.log("added to map");groupAreaStats.addLayer(k);console.log(ARR_LAYERS);k=groupAreaStats.getLayers()[groupAreaStats.getLayers().length-
1]._leaflet_id;var r={};r[d]=k;ARR_LAYERS.push(r);ADDED_LAYERS.push(d);k={};n.features[0].properties.show=!0;k[d]=n;k[d].show=!0;LAYERS_REPO.push(k);$.each(LAYERS_REPO,function(h){LAYERS_REPO[h].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[h][LAYER_NAME].show=!0,LAYER_GEOJSON=L.geoJson(LAYERS_REPO[h][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))});setTimeout(function(){$("#loadMe").modal("hide")},500)}});else if(ADDED_LAYERS.includes(d)&&1==b){for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(d)),
ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),b=groupAreaStats.getLayer(ARR_LAYERS[c][d]),map.addLayer(b));$.each(LAYERS_REPO,function(n){LAYERS_REPO[n].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[n][LAYER_NAME].show=!0,LAYER_GEOJSON=L.geoJson(LAYERS_REPO[n][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))})}else if(0==b){console.log(groupAreaStats.getLayers());console.log(d);for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(d)),ARR_LAYERS[c].hasOwnProperty(d)&&
(console.log(ARR_LAYERS[c][d]),b=groupAreaStats.getLayer(ARR_LAYERS[c][d]),map.removeLayer(b));LAYER_GEOJSON=L.geoJson(null)}else console.log("ehhh no condition met")}
function toggleSurveyLoc(c,d,l){LAYER_NAME=d;if(0!=groupSurvey.getLayers().length&&0!=ADDED_LAYERS.includes(d)||1!=l)if(ADDED_LAYERS.includes(d)&&1==l){for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(d)),ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupSurvey.getLayer(ARR_LAYERS[c][d]),map.addLayer(l),map.fitBounds(l.getBounds()));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!0,console.log("set show to true--\x3e",
LAYER_NAME))})}else if(0==l){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupSurvey.getLayer(ARR_LAYERS[c][d]),map.removeLayer(l));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!1,console.log("set show to false--\x3e",LAYER_NAME))})}else console.log("ehhh no condition met");else $("#loadMe").modal("show"),$.ajax({xhr:function(){var g=new window.XMLHttpRequest;g.addEventListener("progress",
function(b){b.lengthComputable&&(b=100*parseFloat(b.loaded/b.total),(new ldBar("#myItem1")).set(b),100==b&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return g},type:"GET",url:c,success:function(g){var b=L.geoJSON(g,{onEachFeature:function(k,r){var h=k.properties;h="<strong>Species:</strong> "+h.Species+"</br><strong>Location:</strong> "+h.Bgy_Name+", "+h.Mun_Name+", "+h.Pro_Name+", "+h.Reg_Name+"</br><strong>Area in hectares:</strong>"+parseFloat(h.Area_sqm/
1E4).toFixed(2);r.bindPopup(h)},style:function(k){k=k.properties.Species;return{fillColor:"Falcata"==k?"#006d2c":"Gmelina"==k?"#a50f15":"Mangium"==k?"#54278f":"#08519c",color:"black",weight:.1,fill:!0,stroke:!0,fillOpacity:.8}}}).addTo(map);map.fitBounds(b.getBounds());console.log("added to map");groupSurvey.addLayer(b);console.log(ARR_LAYERS);b=groupSurvey.getLayers()[groupSurvey.getLayers().length-1]._leaflet_id;var n={};n[d]=b;ARR_LAYERS.push(n);ADDED_LAYERS.push(d);b={};g.features[0].properties.show=
!0;b[d]=g;b[d].show=!0;LAYERS_REPO.push(b);$.each(LAYERS_REPO,function(k){LAYERS_REPO[k].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[k][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[k][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))});setTimeout(function(){$("#loadMe").modal("hide")},500)}})}
function toggleTPO(c,d,l){LAYER_NAME=d;if(0!=groupTPO.getLayers().length&&0!=ADDED_LAYERS.includes(d)||1!=l)if(ADDED_LAYERS.includes(d)&&1==l){for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(d)),ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupTPO.getLayer(ARR_LAYERS[c][d]),map.addLayer(l),map.fitBounds(l.getBounds()));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!0,console.log("set show to true--\x3e",
LAYER_NAME))})}else if(0==l){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupTPO.getLayer(ARR_LAYERS[c][d]),map.removeLayer(l));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!1,console.log("set show to false--\x3e",LAYER_NAME))})}else console.log("ehhh no condition met");else $("#loadMe").modal("show"),$.ajax({xhr:function(){var g=new window.XMLHttpRequest;g.addEventListener("progress",
function(b){b.lengthComputable&&(b=100*parseFloat(b.loaded/b.total),(new ldBar("#myItem1")).set(b),100==b&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return g},type:"GET",url:c,success:function(g){var b="Point"==g.features[0].geometry.type?L.geoJSON(g,{onEachFeature:function(k,r){var h=k.properties;h="<strong>Species:</strong> "+h.Species+"</br><strong>Location:</strong> "+h.Bgy_Name+", "+h.Mun_Name+", "+h.Pro_Name+", "+h.Reg_Name+"</br><strong>Area in hectare:</strong>"+
parseFloat(h.Area).toFixed(2)+"</br><strong>Owner:</strong>"+h.Owner;r.bindPopup(h)},pointToLayer:function(k,r){var h=k.properties.Species;return L.circleMarker(r,{fillColor:"Falcata"==h?"#006d2c":"Gmelina"==h?"#a50f15":"Mangium"==h?"#54278f":"#08519c",radius:8,color:"#000",weight:1,opacity:1,stroke:!1,fillOpacity:.8})}}).addTo(map):L.geoJSON(g,{onEachFeature:function(k,r){var h=k.properties;h="<strong>Species:</strong> "+h.Species+"</br><strong>Location:</strong> "+h.Bgy_Name+", "+h.Mun_Name+", "+
h.Pro_Name+", "+h.Reg_Name+"</br><strong>Area in hectare:</strong>"+parseFloat(h.Area).toFixed(2)+"</br><strong>Owner:</strong>"+h.Owner;r.bindPopup(h)},style:function(k){k=k.properties.Species;return{fillColor:"Falcata"==k?"#006d2c":"Gmelina"==k?"#a50f15":"Mangium"==k?"#54278f":"#08519c",color:"black",weight:.1,fill:!0,stroke:!0,fillOpacity:.8}}}).addTo(map);map.fitBounds(b.getBounds());console.log("added to map");groupTPO.addLayer(b);console.log(ARR_LAYERS);b=groupTPO.getLayers()[groupTPO.getLayers().length-
1]._leaflet_id;var n={};n[d]=b;ARR_LAYERS.push(n);ADDED_LAYERS.push(d);b={};g.features[0].properties.show=!0;b[d]=g;b[d].show=!0;LAYERS_REPO.push(b);$.each(LAYERS_REPO,function(k){LAYERS_REPO[k].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[k][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[k][LAYER_NAME]),console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))})}})}
function toggleOtherLayer(c,d,l){LAYER_NAME=d;if(0!=groupOtherLayer.getLayers().length&&0!=ADDED_LAYERS.includes(d)||1!=l)if(ADDED_LAYERS.includes(d)&&1==l){for(c=0;c<ARR_LAYERS.length;c++)console.log(ARR_LAYERS[c].hasOwnProperty(d)),ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupOtherLayer.getLayer(ARR_LAYERS[c][d]),map.addLayer(l),map.fitBounds(l.getBounds()));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!0,console.log("set show to true--\x3e",
LAYER_NAME))})}else if(0==l){for(c=0;c<ARR_LAYERS.length;c++)ARR_LAYERS[c].hasOwnProperty(d)&&(console.log(ARR_LAYERS[c][d]),l=groupOtherLayer.getLayer(ARR_LAYERS[c][d]),map.removeLayer(l));$.each(LAYERS_REPO,function(g){LAYERS_REPO[g].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[g][LAYER_NAME].show=!1,console.log("set show to false--\x3e",LAYER_NAME))})}else console.log("ehhh no condition met");else $("#loadMe").modal("show"),$.ajax({xhr:function(){var g=new window.XMLHttpRequest;g.addEventListener("progress",
function(b){b.lengthComputable&&(b=100*parseFloat(b.loaded/b.total),(new ldBar("#myItem1")).set(b),100==b&&setTimeout(function(){console.log("completed...");$("#loadMe").modal("hide")},500))},!1);return g},type:"GET",url:c,success:function(g){var b=L.geoJSON(g,{onEachFeature:function(k,r){r.bindPopup("<strong>Name:</strong> "+k.properties.Name+"<strong>")},pointToLayer:function(k,r){return L.circleMarker(r,{fillColor:"Wood Processing Plant"==d?"yellow":"brown",radius:8,color:"#000",weight:1,opacity:1,
stroke:!0,fillOpacity:.8})}}).addTo(map);map.fitBounds(b.getBounds());console.log("added to map");groupOtherLayer.addLayer(b);console.log(ARR_LAYERS);b=groupOtherLayer.getLayers()[groupOtherLayer.getLayers().length-1]._leaflet_id;var n={};n[d]=b;ARR_LAYERS.push(n);ADDED_LAYERS.push(d);b={};g.features[0].properties.show=!0;b[d]=g;b[d].show=!0;LAYERS_REPO.push(b);$.each(LAYERS_REPO,function(k){LAYERS_REPO[k].hasOwnProperty(LAYER_NAME)&&(LAYERS_REPO[k][LAYER_NAME].show=!0,LAYER_GEOJSON.addData(LAYERS_REPO[k][LAYER_NAME]),
console.log("added LAYER_GEOJSON--\x3e",LAYER_NAME))})}})}function loadLocs(){var c=["AGUSAN DEL NORTE","AGUSAN DEL SUR","SURIGAO DEL NORTE","SURIGAO DEL SUR","DINAGAT ISLANDS"];$.getJSON(CARAGA_PLACES,function(d){$.each(d.province_list,function(l,g){$.each(g,function(b,n){$.each(n,function(k,r){for(var h=r.barangay_list,v=0;v<h.length;v++)c.includes(k+", "+l)||c.push(k+", "+l),c.push(h[v]+", "+k+", "+l)})})})});return c}
$(document).ready(function(){$("#staticBackdrop").modal("show");$(function(){$('[data-toggle="tooltip"]').tooltip()});$("#loadMe").on("hidden.bs.modal",function(e){LOADING_BAR.set(0)});var c=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"Map data &copy; OpenStreetMap contributors",name:"Open Street Map",zIndex:0}).addTo(map),d=L.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"Map data &copy; Google",
name:"Google Sattelite",zIndex:0}),l=L.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"Map data &copy; Google",name:"Google Hybrid",zIndex:0}),g=L.tileLayer.bing({bingMapsKey:"Ao6UEij7ZblJ1soOx6opo-plK6LyISwyibIqcPQSRWpxE_yQ27qwI7HdoDNN9ePl",imagerySet:"Road",zIndex:0}),b=L.tileLayer.bing({bingMapsKey:"Ao6UEij7ZblJ1soOx6opo-plK6LyISwyibIqcPQSRWpxE_yQ27qwI7HdoDNN9ePl",imagerySet:"Aerial"}),n=L.tileLayer.bing({bingMapsKey:"Ao6UEij7ZblJ1soOx6opo-plK6LyISwyibIqcPQSRWpxE_yQ27qwI7HdoDNN9ePl",
imagerySet:"AerialWithLabels"});(new L.Control.Measure({position:"topleft",primaryLengthUnit:"feet",secondaryLengthUnit:"kilometers",primaryAreaUnit:"hectares",secondaryAreaUnit:"sqmeters"})).addTo(map);var k=L.Control.loading({position:"topleft",separate:!0});map.addControl(k);var r=L.control({position:"topright"});r.onAdd=function(e){e=L.DomUtil.create("div","maplegend");e.innerHTML+="<h4>ITP Species</h4>";e.innerHTML+='<i style="background: #006d2c"></i><span>Falcata</span><br>';e.innerHTML+='<i style="background: #a50f15"></i><span>Gmelina</span><br>';
e.innerHTML+='<i style="background: #54278f"></i><span>Mangium</span><br>';e.innerHTML+='<i style="background: #08519c"></i><span>Bagras</span><br>';return e};var h=L.control({position:"topright"}),v=L.control.sidebar({container:"sidebar"}).addTo(map);v.on("content",function(e){switch(e.id){case "autopan":v.options.autopan=!0;break;default:v.options.autopan=!1}});$("select#layers").treeMultiselect({allowBatchSelection:!1,showSectionOnSelected:!1,onChange:function(e,p,a){map.hasLayer(FILTERED_LAYER)&&
map.removeLayer(FILTERED_LAYER);var m=e=null,q=null,f=q=m=e=null;0<a.length&&(e=a[0].value,m=a[0].text,q=a[0].section.split("/"),f=m+"_"+q[2],"stats"==e&&toogleAreaStats(null,f,m,q[2],!1),"trees"==e&&toogleTrees(null,m,!1),"survey"==e&&toggleSurveyLoc(null,m,!1),"others"==e&&toggleOtherLayer(null,m,!1),"ownership"==e&&(a=m+"_"+q[3].replace(" ",""),toggleTPO(null,a,!1)),"denrcaraga"==e&&(a=m+"_"+q[3].replace(" ",""),toogleTreesNGP(null,m,a,!1)),"penroadn"==e||"penroads"==e||"cenrotalacogon"==e||"cenrotubay"==
e)&&(a=m+"_"+q[3].replace(" ",""),toogleTreesNGPOthers(null,m,a,!1));if(0<p.length){LOADED_LAYERS.includes(p[0])||(LOADED_LAYERS.push(p[0]),console.log(LOADED_LAYERS));e=p[0].value;m=p[0].text;q=p[0].section.split("/");LAYER_TYPE=e;if("trees"===e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);for(a=0;a<LOADED_LAYERS.length;a++)"trees"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());
f=null;"Falcata"===m&&(f=FALCATA_GEOJSON);"Gmelina"===m&&(f=GMELINA_GEOJSON);"Mangium"===m&&(f=MANGIUM_GEOJSON);"Bagras"===m&&(f=BAGRAS_GEOJSON);toogleTrees(f,m,!0)}if("others"===e){map.removeControl(h);map.removeControl(r);for(a=0;a<LOADED_LAYERS.length;a++)"others"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());f=null;"Wood Processing Plant"===m&&(f=WPPs);"Furniture Store"===
m&&(f=FURNITURE);toggleOtherLayer(f,m,!0)}if("denrcaraga"===e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);map.removeLayer(groupTrees);for(a=0;a<LOADED_LAYERS.length;a++)"denrcaraga"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());a=m+"_"+q[3].replace(" ","");f="Falcata_DENRCaraga"==a?NGP_FALCATA_DENR:"Gmelina_DENRCaraga"==a?NGP_GMELINA_DENR:"Mangium_DENRCaraga"==
a?NGP_MANGIUM_DENR:NGP_BAGRAS_DENR;toogleTreesNGP(f,m,a,!0)}if("penroadn"==e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);map.removeLayer(groupTrees);for(a=0;a<LOADED_LAYERS.length;a++)"penroadn"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());a=m+"_"+q[3].replace(" ","");f="Falcata_PENROADN"==a?NGP_PENRO_ADN_FALCATA:"Mangium_PENROADN"==a?NGP_PENRO_ADN_MANGIUM:
NGP_PENRO_ADN_BAGRAS;toogleTreesNGPOthers(f,m,a,!0)}if("penroads"==e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);map.removeLayer(groupTrees);for(a=0;a<LOADED_LAYERS.length;a++)"penroads"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());a=m+"_"+q[3].replace(" ","");var x=m;f="Falcata_PENROADS"==a?NGP_PENRO_ADS_FALCATA:"Mangium_PENROADS"==a?NGP_PENRO_ADS_MANGIUM:
NGP_PENRO_ADS_BAGRAS;console.log(a);toogleTreesNGPOthers(f,x,a,!0)}if("cenrotalacogon"==e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);map.removeLayer(groupTrees);for(a=0;a<LOADED_LAYERS.length;a++)"cenrotalacogon"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());a=m+"_"+q[3].replace(" ","");f="Falcata_CENROTalacogon"==a?NGP_CENRO_TALACOGON_FALCATA:null;
toogleTreesNGPOthers(f,m,a,!0)}if("cenrotubay"==e){r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);map.removeLayer(groupTrees);for(a=0;a<LOADED_LAYERS.length;a++)"cenrotubay"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());a=m+"_"+q[3].replace(" ","");f="Falcata_CENROTubay"==a?NGP_CENRO_TUBAY_FALCATA:NGP_CENRO_TUBAY_MANGIUM;toogleTreesNGPOthers(f,m,a,!0)}if("survey"===
e){r.addTo(map);map.removeControl(h);for(a=0;a<LOADED_LAYERS.length;a++)"survey"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());f=null;"ADS Ground Truth"==m&&(f=ADS_GROUND_TRUTH);toggleSurveyLoc(f,m,!0)}if("ownership"===e){r.addTo(map);map.removeControl(h);for(a=0;a<LOADED_LAYERS.length;a++)"ownership"!=LOADED_LAYERS[a].value&&(f=LOADED_LAYERS[a].node,f.getElementsByTagName("input")[0].checked=
!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click());f=null;a=m+"_"+q[3].replace(" ","");"2011_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2011);"2012_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2012);"2013_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2013);"2015_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2015);"2016_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2016);"2017_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2017);"2019_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2019);"2020_CTPOCENRO Nasipit"==a&&(f=TPO_NASIPIT_2020);
"Falcata_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_FALCATA);"Gmelina_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_GMELINA);"Mangium_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_MANGIUM);"2012-2013_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_2012_2013);"2016-2017_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_2016_2017);"2017-2018_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_2017_2018);"2018-2019_CTPOCENRO Talacogon"==a&&(f=TPO_TALACOGON_2018_2019);"Falcata_CTPOCENRO Loreto"==a&&(f=TPO_LORETO_FALCATA);"Gmelina_CTPOCENRO Loreto"==
a&&(f=TPO_LORETO_GMELINA);"Polygon_CTPOCENRO Tubay"==a&&(f=TPO_TUBAY);toggleTPO(f,a,!0)}if("stats"===e){map.removeControl(r);map.removeLayer(groupTrees);map.removeLayer(groupTreesNGP);for(a=0;a<LOADED_LAYERS.length;a++)f=LOADED_LAYERS[a].node,LOADED_LAYERS[a].id!=p[0].id?(f.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[a].id+'"] span.remove-selected').click()):f.getElementsByTagName("input")[0].checked=!0;f=null;a=m+"_"+q[2];var t=q[2];f="Barangay"==m?ITP_AREA_BRGY:
"City/Municipality"==m?ITP_AREA_MUN:ITP_AREA_PRO;toogleAreaStats(f,a,m,t,!0);h.onAdd=function(u){u=L.DomUtil.create("div","maplegend");var y="Falcata"==t?"#edf8e9":"Gmelina"==t?"#fee5d9":"Mangium"==t?"#f2f0f7":"#eff3ff",z="Falcata"==t?"#bae4b3":"Gmelina"==t?"#fcae91":"Mangium"==t?"#cbc9e2":"#bdd7e7",A="Falcata"==t?"#74c476":"Gmelina"==t?"#fb6a4a":"Mangium"==t?"#9e9ac8":"#6baed6",B="Falcata"==t?"#31a354":"Gmelina"==t?"#de2d26":"Mangium"==t?"#756bb1":"#3182bd",C="Falcata"==t?"#006d2c":"Gmelina"==t?
"#a50f15":"Mangium"==t?"#54278f":"#08519c";u.innerHTML+="<h4>"+t+" Area & Statistics in hectare</h4>";u.innerHTML+='<i style="background: #ffffff;border: 1px solid #000"></i><span>&nbsp;&nbsp;&nbsp;0 </span><br>';u.innerHTML+="<i style='background: "+y+";border: 1px solid #000'></i><span> > 0&nbsp;&nbsp; to <= 10</span><br>";u.innerHTML+="<i style='background: "+z+";border: 1px solid #000'></i><span> > 10 to <= 20</span><br>";u.innerHTML+="<i style='background: "+A+";border: 1px solid #000'></i><span> > 20 to <=30</span><br>";
u.innerHTML+="<i style='background: "+B+";border: 1px solid #000'></i><span> > 30 to <= 40</span><br>";u.innerHTML+="<i style='background: "+C+";border: 1px solid #000'></i><span> > 40 </span><br>";return u};h.addTo(map);LAYER_NAME=a}}},startCollapsed:!0});$("#base_map").multiselect({multiple:!1,onChange:function(e,p,a){e=$(e).val();"osm"==e?(map.removeLayer(d),map.removeLayer(l),map.addLayer(c),map.removeLayer(g),map.removeLayer(n),map.removeLayer(b)):"googleHybrid"==e?(map.addLayer(l),map.removeLayer(d),
map.removeLayer(c),map.removeLayer(g),map.removeLayer(n),map.removeLayer(b)):"bingmap"==e?(map.addLayer(g),map.removeLayer(d),map.removeLayer(c),map.removeLayer(l),map.removeLayer(n),map.removeLayer(b)):"bingimagery"==e?(map.addLayer(b),map.removeLayer(g),map.removeLayer(d),map.removeLayer(c),map.removeLayer(l),map.removeLayer(n)):"binghybrid"==e?(map.addLayer(n),map.removeLayer(g),map.removeLayer(d),map.removeLayer(c),map.removeLayer(l),map.removeLayer(b)):(map.addLayer(d),map.removeLayer(c),map.removeLayer(l),
map.removeLayer(g),map.removeLayer(n))}});$("#trees").val("").multiselect({multiple:!1,nonSelectedText:"Select ITP Species",onChange:function(e,p,a){map.hasLayer(FILTERED_LAYER)&&map.removeLayer(FILTERED_LAYER);e=$(e).val();a=$("#q").val();if(p&&"distri"==a){LAYER_TYPE="trees";for(p=0;p<LOADED_LAYERS.length;p++)a=LOADED_LAYERS[p].node,a.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[p].id+'"] span.remove-selected').click();r.addTo(map);map.removeControl(h);map.removeLayer(groupAreaStats);
for(p=0;p<LOADED_LAYERS.length;p++)"trees"!=LOADED_LAYERS[p].value&&(a=LOADED_LAYERS[p].node,a.getElementsByTagName("input")[0].checked=!1,$('.item[data-key="'+LOADED_LAYERS[p].id+'"] span.remove-selected').click());"Falcata"===e&&toogleTrees(FALCATA_GEOJSON,e,!0);"Gmelina"===e&&toogleTrees(GMELINA_GEOJSON,e,!0);"Mangium"===e&&toogleTrees(MANGIUM_GEOJSON,e,!0);"Bagras"===e&&toogleTrees(BAGRAS_GEOJSON,e,!0)}}});k=document.getElementById("myChart");var w=new Chart(k,{type:"bar",data:{labels:["Falcata",
"Gmelina","Mangium","Bagras"],datasets:[{label:"ITP Species Area in Hectares",data:[],backgroundColor:["#006d2c","#a50f15","#54278f","#08519c"]}]},options:{legend:{labels:{boxWidth:0}},title:{display:!0,text:""},scales:{yAxes:[{ticks:{beginAtZero:!0}}]},plugins:{datalabels:{anchor:"end",align:"top",font:{weight:"bold"}}}}});map.on("click",function(e){highlight&&map.removeLayer(highlight);var p=e.latlng.lng,a=e.latlng.lat;if("trees"==LAYER_TYPE||"denrcaraga"==LAYER_TYPE)if(LAYER_DATA=leafletPip.pointInLayer([p,
a],LAYER_GEOJSON,!0),LAYER_DATA[0]){var m=LAYER_DATA[0].feature.properties,q=LAYER_DATA[0].feature;highlight=new L.geoJson(q,{style:{color:"yellow",fillColor:"white"}});var f="<strong>Species:</strong> "+m.Species+"</br><strong>Location:</strong> "+m.Bgy_Name+", "+m.Mun_Name+", "+m.Pro_Name+", "+m.Reg_Name+"</br><strong>Area in hectares:</strong>"+parseFloat(m.Area_sqm/1E4).toFixed(2);map.on("popupclose",function(){map.removeLayer(highlight)});setTimeout(function(){highlight.addTo(map);map.openPopup(f,
e.latlng)},50)}else console.log("no feature found...");"stats"==LAYER_TYPE&&(LAYER_DATA=leafletPip.pointInLayer([p,a],LAYER_GEOJSON,!0),LAYER_DATA[0]&&(m=LAYER_DATA[0].feature.properties,p="",p=m.Bgy_Name?m.Bgy_Name+", "+m.Mun_Name+", "+m.Pro_Name:m.Mun_Name?m.Mun_Name+", "+m.Pro_Name:m.Pro_Name,q=LAYER_DATA[0].feature,highlight=new L.geoJson(q,{style:{color:"yellow",fillColor:"white"}}),w.data.datasets[0].data=[m.Falc_Ar_h,m.Gmel_Ar_h,m.Mang_Ar_h,m.Bagr_Ar_h],w.options.title.text=p,w.update(),setTimeout(function(){highlight.addTo(map);
$("#chartMe").modal("show")},50),$("#chartMe").on("hidden.bs.modal",function(x){map.removeLayer(highlight)})))});k=loadLocs();$("#the-basics .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"barangays",source:function(e){return function(p,a){var m=[];substrRegex=new RegExp(p,"i");$.each(e,function(q,f){substrRegex.test(f)&&m.push(f)});a(m)}}(k)});$("#citymun").remoteChained({parents:"#prov",url:CARAGA_PLACES,data:function(e){var p=$("#prov").val();e=e.province_list[p].municipality_list;
var a=[];a.push({"-":"Select City/Municipality"});$.each(e,function(m){var q={};q[m]=m;a.push(q)});return a}});$("#brgy").remoteChained({parents:"#citymun, #prov",url:CARAGA_PLACES,data:function(e){var p=$("#prov").val(),a=$("#citymun").val();e=e.province_list[p].municipality_list[a].barangay_list;var m=[];m.push({"-":"Select Barangay"});e.forEach(function(q){var f={};f[q]=q;m.push(f)});return m}});$("#btnOK").click(function(){v.open("about")});$("#btnWebMap").click(function(){v.open("query")});$("#btnSearhDL").click(function(){v.open("download")});
$("#btnWebMap1").click(function(){v.open("query")});$("#btnSearhDL1").click(function(){v.open("download")});$("#btnAgree").click(function(){v.open("welcome")});$("#searchBarangay").focus(function(){$("#the-basics .typeahead").typeahead("val","")});$("#btnSearchBrgy").click(function(){map.hasLayer(FILTERED_LAYER)&&map.removeLayer(FILTERED_LAYER);var e=$("#searchBarangay").val().split(","),p="-",a="-",m="-";console.log(e);1==e.length&&(m=e[0].trim());2==e.length&&(a=e[0].trim(),m=e[1].trim());3==e.length&&
(p=e[0].trim(),a=e[1].trim(),m=e[2].trim());var q=null;$.each(LAYERS_REPO,function(f){LAYERS_REPO[f].hasOwnProperty(LAYER_NAME)&&(q=LAYERS_REPO[f][LAYER_NAME])});FILTERED_LAYER=L.geoJson(q,{style:{fillColor:"#fff",color:"yellow",weight:2,fill:!1,stroke:!0,fillOpacity:0},filter:function(f){return"-"!=a&&"-"!=p?f.properties.Bgy_Name==p&&f.properties.Mun_Name==a&&f.properties.Pro_Name==m:"-"!=a?f.properties.Mun_Name==a&&f.properties.Pro_Name==m:f.properties.Pro_Name==m}}).addTo(map);null==q?alert("YOU HAVE NOT SELECTED/LOADED A LAYER!"):
0<FILTERED_LAYER.getLayers().length?map.fitBounds(FILTERED_LAYER.getBounds()):alert("NO RESULT FOUND, TRY ANOTHER LOCATION!")});$("#btnGo").click(function(){map.hasLayer(FILTERED_LAYER)&&map.removeLayer(FILTERED_LAYER);var e=$("#brgy").val(),p=$("#citymun").val(),a=$("#prov").val(),m=null;$.each(LAYERS_REPO,function(q){LAYERS_REPO[q].hasOwnProperty(LAYER_NAME)&&(m=LAYERS_REPO[q][LAYER_NAME])});FILTERED_LAYER=L.geoJson(m,{style:{fillColor:"#fff",color:"yellow",weight:2,fill:!1,stroke:!0,fillOpacity:0},
filter:function(q,f){return"-"!=p&&"-"!=e?q.properties.Bgy_Name==e&&q.properties.Mun_Name==p&&q.properties.Pro_Name==a:"-"!=p?q.properties.Mun_Name==p&&q.properties.Pro_Name==a:q.properties.Pro_Name==a}}).addTo(map);0<FILTERED_LAYER.getLayers().length?map.fitBounds(FILTERED_LAYER.getBounds()):alert("NO RESULT FOUND, TRY ANOTHER LOCATION!")})});